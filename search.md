## 最新、以下のコードは調整前だったので今回調整後のコードを記録（AA）

<!-- これは、aタグとdivタグの順番を入れ替えてカード先頭のaタグにjs処理がなされるようにした -->
<!-- さらに、条件外のものをjsでhiddenにしてしまっていたので空hoverでリンクが見えてしまっていたところを.uinoneを追加して対応し余白分もツメることができた -->
 <!-- メインコンテンツ -->

        <main>
            <!-- B-1製品群 -->
            <h4>切削・加工</h4>
            <div class="product-grid_2test">
                <!-- B-1製品群 -->
                 <a href="../category-b/b1/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1712003752927-d4d14921f96a?auto=format&fit=crop&q=80" alt="製品A-1-1">
                        <div class="product-card-productname_2test">
                            <p>切削<br>B-1-1<br>B11式ABCDEF</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">電化</span>
                                <span class="product-tag-product">脱炭素化</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="../category-b/b1-2/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div >
                        <img src="https://images.unsplash.com/photo-1655562693681-ee2a0a81db88?auto=format&fit=crop&q=80" alt="製品A-1-2">
                        <div class="product-card-productname_2test">
                            <p>切削<br>B-1-2<br>B12式GHIJK</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">IOT/ICT</span>
                                <span class="product-tag-product">現場改善</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="../category-b/b1-3/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1703777607612-3b6b210c3adf?auto=format&fit=crop&q=80" alt="製品A-1-3">
                        <div class="product-card-productname_2test">
                            <p>加工<br>B-1-3<br>B13式LMNOPQRS</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">リユース</span>
                                <span class="product-tag-product">環境改善リサイクル</span>
                                <span class="product-tag-product">電化</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="../category-b/b1-4/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1529255848089-c4e456d166e0?auto=format&fit=crop&q=80" alt="製品A-1-2">
                        <div class="product-card-productname_2test">
                            <p>加工<br>B-1-4<br>B14式TUVWXYZ</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">IOT/ICT</span>
                                <span class="product-tag-product">現場改善</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="../category-b/b1-5/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1625773084027-5ede6d300b25?auto=format&fit=crop&q=80" alt="製品A-1-3">
                        <div class="product-card-productname_2test">
                            <p>加工<br>B-1-5<br>B15式ABCDEFG</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">リユース</span>
                                <span class="product-tag-product">環境改善リサイクル</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- B-2製品群 -->
            <h4>研磨・研削</h4>
            <div class="product-grid_2test">
                <!-- B-2製品群 -->
                <a href="../category-b/b2-1/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1597423497965-32b0da69bce3?auto=format&fit=crop&q=80" alt="製品A-1-1">
                        <div class="product-card-productname_2test">
                            <p>研磨<br>B-2-1<br>B21式ABCDE</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">電化</span>
                                <span class="product-tag-product">脱炭素化</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="../category-b/b2-2/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1515630771457-09367d0ae038?auto=format&fit=crop&q=80" alt="製品A-1-2">
                        <div class="product-card-productname_2test">
                            <p>研磨<br>B-2-2<br>B22式FGHIJ</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">電化</span>
                                <span class="product-tag-product">IOT/ICT</span>
                                <span class="product-tag-product">現場改善</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="../category-b/b2-3/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1564182872950-978e194a05cd?auto=format&fit=crop&q=80" alt="製品A-1-3">
                        <div class="product-card-productname_2test">
                            <p>研削<br>B-2-3<br>B23式KLMNOPQRST</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">リユース</span>
                                <span class="product-tag-product">環境改善リサイクル</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- B-3製品群 -->
            <h4>光学部品</h4>
            <div class="product-grid_2test">
                <!-- B-3製品群 -->
                <a href="../category-b/b3-1/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1606814540563-5c02d62fd409?auto=format&fit=crop&q=80" alt="製品A-1-1">
                        <div class="product-card-productname_2test">
                            <p>光学部品<br>B-3-1<br>B31式UVWX</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">電化</span>
                                <span class="product-tag-product">脱炭素化</span>
                                <span class="product-tag-product">IOT/ICT</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="../category-b/b3-2/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1651340675491-6fb0bfb5c4ea?auto=format&fit=crop&q=80" alt="製品A-1-2">
                        <div class="product-card-productname_2test">
                            <p>光学部品<br>B-3-2<br>B32式YZABCDE</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">IOT/ICT</span>
                                <span class="product-tag-product">現場改善</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="../category-b/b3-3/product1.html" target="_blank" rel="noopener noreferrer" class="product-card_2test">
                    <div>
                        <img src="https://images.unsplash.com/photo-1722710070506-eb16da390855?auto=format&fit=crop&q=80" alt="製品A-1-3">
                        <div class="product-card-productname_2test">
                            <p>光学部品<br>B-3-3<br>B33式FGHIJKLMN</p>
                        </div>
                        <div class="product-info-product_2test">
                            <div class="product-tags">
                                <span class="product-tag-product">リユース</span>
                                <span class="product-tag-product">環境改善リサイクル</span>
                                <span class="product-tag-product">IOT/ICT</span>
                                <span class="product-tag-product">工具・周辺機器</span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </main>
    </div>

    <!-- フッター -->
    <div id="commonFooter"></div>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="/assets/js/loadCommonParts.js"></script>
    <script src="/assets/js/megamenu.js"></script>
    <script src="/assets/js/top.js"></script>
    <script src="/assets/js/category.js"></script>
    <script src="/assets/js/products-search.js"></script>

</body>
</html>

## and 検索

// and 検索
// function filterProducts() {
// チェックされた項目を取得
// const selectedValues = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(input => input.value);

    // フィルター対象の製品カードを取得
    // const productCards = document.querySelectorAll('.product-card_2test');

    // let visibleCount = 0;

    // productCards.forEach(card => {
        // 各カードに含まれるタグを取得
        // const productTags = Array.from(card.querySelectorAll('.product-tag-product')).map(tag => tag.textContent);

        // 全ての選択した条件を満たしているか確認
        // const matchesAll = selectedValues.every(value => productTags.includes(value));

    //     if (matchesAll) {
    //         card.style.display = 'block'; // すべての条件に合うものを表示
    //         visibleCount++;
    //     } else {
    //         card.style.display = 'none'; // 合わないものを非表示
    //     }
    // });

    // 件数を更新

// document.getElementById('result-count').textContent = visibleCount;
// }

// チェックボックスが変更されるたびにフィルター処理を実行
// document.querySelectorAll('.filter-checkbox').forEach(input => {
// input.addEventListener('change', filterProducts);
// });

// 初期表示
// filterProducts();

## or 検索(旧：直す前なので使用には要注意 AA に修正した)

// or 検索
document.addEventListener('DOMContentLoaded', () => {
const checkboxes = document.querySelectorAll('.filter-checkbox');
const productCards = document.querySelectorAll('.product-card_2test');
const resultCount = document.getElementById('result-count');

    const filterProducts = () => {
        const selectedTags = Array.from(checkboxes)
            .filter(checkbox => checkbox.checked)
            .map(checkbox => checkbox.value);

        let visibleCount = 0;

        productCards.forEach(card => {
            const tags = Array.from(card.querySelectorAll('.product-tag-product'))
                .map(tag => tag.textContent.trim());
            if (
                selectedTags.length === 0 ||
                selectedTags.some(tag => tags.includes(tag))
            ) {
                card.classList.remove('hidden');
                visibleCount++;
            } else {
                card.classList.add('hidden');
            }
        });

        resultCount.textContent = visibleCount;
    };

    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', filterProducts);
    });

    filterProducts();

});

## hover したら表示されるも保持されない

// document.addEventListener('DOMContentLoaded', function() {
// const hashtags = document.querySelectorAll('.hashtag');
// const productGrid = document.querySelector('.product-grid');

// ここから非表示 ①
// 製品データ（実際は API や JSON ファイルから取得）
// const products = [
// {
// id: 1,
// name: "製品 A-1-1",
// category: "A-1",
// tags: ["電化", "脱炭素化"],
// image: "/assets/images/products/a-1-1.jpg"
// },
// 他の製品データ
// ];
// ここまで非表示 ②

// hashtags.forEach(tag => {
// tag.addEventListener('mouseover', () => {
// const selectedTag = tag.dataset.tag;

// // 選択されたタグに関連する製品をフィルタリング
// const filteredProducts = products.filter(product =>
// product.tags.includes(selectedTag)
// );

// // 製品一覧を表示
// displayProducts(filteredProducts);
// });
// });

// function displayProducts(products) {
// productGrid.innerHTML = products.map(product => `//             <div class="product-card">
//                 <img src="${product.image}" alt="${product.name}">
//                 <h3>${product.name}</h3>
//                 <p>カテゴリー: ${product.category}</p>
//                 <a href="/products/${product.category.toLowerCase()}/${product.id}/" class="btn">詳細を見る</a>
//             </div>
//        `).join('');
// }
// });
